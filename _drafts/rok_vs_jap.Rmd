---
title: 'South Korea vs. Japan women''s ice hockey: 20 years of closing the gap'
date: '2018-02-13'
layout: post
tags: R ice-hockey
comment: yes
---

```{r setup, echo=FALSE, message=FALSE}
# knitr settings
knitr::opts_chunk$set(fig.path = "assets/Rfigs/", echo=FALSE, comment="> ", fig.align='center')
knitr::opts_knit$set(base.dir = "/Users/nunnlab/Desktop/GitHub/rgriff23.github.io/", base.url = "/")

# load packages 
library("ggplot2")
```

I compiled the [dates and scores](https://www.nationalteamsoficehockey.com/wp-content/uploads/2018/01/South-Korea-Women-All-Time-Results.pdf) of all the games against Japan in the history of the program, a record that reaches back to 1999. 

The following plot shows the goal differential over time, along with the best-fit regression line (in blue with shaded confidence interval) to estimate the trend. The vertical red line represents February 14, 2018 (the date of the game tomorrow), and the horizontal dashed black line represents a goal differential of 0 (tied game). Goal differentials above the dashed line corresponding the a win for Korea, and differentials below the line corresponding to a win for Japan. The intersection of the blue and red lines represents the predicted goal differential for tomorrow:

```{r goal_differential_plot}
# data
Date <- as.Date(c("2/20/17","2/15/12", "1/28/11","11/11/10","1/29/01","3/28/06","1/30/03","2/4/99", "2/14/18"), format="%m/%d/%y")
diff <- c(-3,-5,-10,-12,-29,-12,-21,-25, -3)
data <- data.frame(Date, diff)

# plot
ggplot(data, aes(x=Date, y=diff)) +
  geom_point(size=3) +
  theme(plot.title=element_text(size=18, hjust=0.5), axis.title.x=element_text(size=16), axis.title.y=element_text(size=16), axis.text=element_text(size=14)) +
  scale_x_date(limits=as.Date(c('1998/1/1','2020/1/1'), format='%Y/%m/%d')) +
  ylim(-35,10) +
  labs(title="ROK vs JAP goal differential vs. time") +
  ylab("Goal differential") +
  xlab("Date") +
  geom_smooth(method='lm', fullrange=TRUE) +
  geom_hline(yintercept=0, lty=2)
```



![](https://i.imgur.com/651EVzt.jpg)

**Footnotes**

* The code is on [GitHub]()